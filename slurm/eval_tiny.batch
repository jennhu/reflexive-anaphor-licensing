#!/bin/bash
#SBATCH --qos=cpl
#SBATCH -J eval_tiny # A single job name for the array
#SBATCH -n 1 # one core
#SBATCH -N 1 # on one node
#SBATCH --time=1-0    # -- first number is days requested, second number is hours
#SBATCH --mem=5G
#SBATCH -o logs/eval_tiny_%j.out # Standard output
#SBATCH -e logs/eval_tiny_%j.err # Standard error
#SBATCH --mail-user=jennhu@mit.edu # -- use this to send an automated email when:
#SBATCH --mail-type=end            # -- your job completes successfully
#SBATCH --mail-type=fail           # -- or if your job fails

MATERIALS="/om/user/jennhu/rnng-refl/materials"
DATA="/om/user/jennhu/rnng-refl/surprisal_data/tiny"
EXP=$1

cd /om/user/jennhu/lm-tinylstm
source activate neural-nlp
python eval.py \
    --checkpoint model_small.pt \
    --eval_data ${MATERIALS}/${EXP}_sentences_no_eos.txt \
    --fpath ${DATA}/${EXP}_surprisal_tiny.txt
